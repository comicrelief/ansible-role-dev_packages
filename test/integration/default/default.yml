---

- hosts: test-kitchen
  remote_user: vagrant
  roles:
    - ansible-role-dev_packages

  pre_tasks:
    - name: add php ppa
      apt_repository:
        repo: ppa:ondrej/php
    - name: install deps
      apt:
        name: "{{ item }}"
        update_cache: yes
        state: present
      with_items:
        - git
        - curl
        - php5.6
  post_tasks:
    - name: Grunt version
      shell: grunt --version
      environment:
        PATH: "/home/vagrant/.composer/vendor/bin:/usr/local/lib/npm/bin:{{ ansible_env.PATH }}"
    - name: phing version
      shell: phing -v
      environment:
        PATH: "/usr/local/lib/npm/bin:/home/vagrant/.composer/vendor/bin:{{ ansible_env.PATH }}"
